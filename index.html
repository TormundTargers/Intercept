<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Intercept</title>
    <script src="assets/phaser.min.js"></script>
</head>
<body>
<script>
// Global variables
var inputDirection = null;              // Stores the direction the actor is to move next
var speed = 2;                          // This is the number of pixels the actor will move each frame
var start = false;                      // If the game has started or not

// Canvas size is a multiple of 32. 32x32 is the size of each grid.
var game = new Phaser.Game(960, 576, Phaser.CANVAS, 'intercept-canvas', { preload: preload, create: create, update: update });
var actor;

function preload() {
	// Assets that will be preloaded will go here

    //  Here we are loading an image. The first parameter is the unique
    //  string by which we'll identify the image later in our code.

    //  The second parameter is the URL of the image (relative)
    game.load.image('actor', 'assets/img/blueBike1.png');

}

function create() {

    //  This creates a simple sprite that is using our loaded image and
    //  displays it on-screen
    actor = game.add.sprite(480, 288, 'actor');
    actor.anchor.x = 0.5;
    actor.anchor.y = 0.5;
    actor.scale.x = 0.3;
    actor.scale.y = 0.3;

}

function update() {
	// Updated every frame
	if (start) {
        getInputDirection(function(){});
		// Main game code
		if (inputDirection != null) {
			actor.angle = inputDirection;
			inputDirection = null;
		}
		switch (actor.angle) {
			case 0:
				actor.y -= speed;
				break;
			case 90:
				actor.x += speed;
				break;
			case -90:
				actor.x -= speed;
				break;
			case -180:
				actor.y += speed;
				break;
		}
	} else {
		getInputDirection(function() {
            start = true;
        });
	}
}
    function getInputDirection(callback) {
        if (game.input.keyboard.isDown(Phaser.Keyboard.UP) && actor.angle != -180) {
            // Start game if enter pressed.
            callback();
            inputDirection = 0;
        }
        else if (game.input.keyboard.isDown(Phaser.Keyboard.DOWN) && actor.angle != 0) {
            // Start game if enter pressed.
            callback();
            inputDirection = -180;
        }
        else if (game.input.keyboard.isDown(Phaser.Keyboard.LEFT) && actor.angle != 90) {
            // Start game if enter pressed.
            callback();
            inputDirection = -90;
        }
        else if (game.input.keyboard.isDown(Phaser.Keyboard.RIGHT) && actor.angle != -90) {
            // Start game if enter pressed.
            callback();
            inputDirection = 90;
        }
    }

</script>
</body>
</html>
